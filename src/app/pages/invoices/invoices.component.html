<div class="container-fluid file_manager">
    <div class="block-header">
        <div class="row">
            <div class="col-lg-5 col-md-8 col-sm-12">
                <h2><a href="javascript:void(0);" class="btn btn-xs btn-link btn-toggle-fullwidth"
                        (click)="toggleFullWidth()">
                        <i class="fa fa-arrow-left" *ngIf="sidebarVisible"></i>
                        <i class="fa fa-arrow-right" *ngIf="!sidebarVisible"></i>
                    </a> Invoices</h2>
            </div>
            
        </div>
    </div>
	<div style="float:right" *ngIf="roleID==='1'">
		<button type="button" class="btn btn-success mr-1"  (click)="openModal(content,'lg')">Add New Invoices</button>
	</div>
	<br>
	<br>
    <div class="row clearfix">
        <div class="col-lg-3 col-md-4 col-sm-12" *ngFor="let quote of quotes">
            <div class="card" (click)="download(quote.name)">
                <div class="file">
                    <a href="javascript:void(0);">
                        <div class="hover">
                        </div>
                        <div class="icon">
                            <i class="fa fa-file text-info"></i>
                        </div>
                        <div class="file-name">
                            <p class="m-b-5 text-muted">{{quote.name}}</p>
                            <small>Size: {{quote.size}}KB <span class="date text-muted">{{quote.date}}</span></small>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Upload Document</h4>
  </div>
  <div class="modal-body">
	<form [formGroup]="form">
		<div class="row">
			<div class="col-md-12">
				<label >Customer</label>
				<select class="custom-select" id="customer" formControlName="customerId">
					<option value="" selected>Choose...</option>
					<option *ngFor="let customer of customers"  [value]="customer.id">{{customer.firstName}} {{customer.lastName}}</option>
				</select>
			</div>
		  </div>
		  <br>
		<div class="row">
		  <div class="col-md-12">
			<div class="custom-file">
			  <input
				type="file"
				class="custom-file-input"
				id="quote"
				(change)="uploadFile($event)"
			  />
			  <label class="custom-file-label" for="quote">{{ fileName }}</label>
			</div>
		  </div>
		</div>
	</form>  
	<div class="container-fluid file_manager" *ngIf="files!==null">
		<div class="row clearfix">
			<div class="col-lg-12 col-md-12 col-sm-12">
			  <div class="">
				<div class="file">
				  <a href="javascript:void(0);">
					<div class="hover">
					  <button type="button" class="btn btn-icon btn-danger" (click)="deleteFile()">
						<i class="fa fa-trash"></i>
					  </button>
					</div>
					<div class="icon">
					  <i class="fa fa-file text-info"></i>
					</div>
					<div class="file-name">
					  <p class="m-b-5 text-muted">{{ fileName }}</p>
					  <small
						>Size: {{fileSize}}KB
						<span class="date text-muted">{{todayDate | date:'mediumDate'}}</span></small
					  >
					</div>
				  </a>
				</div>
			  </div>
			</div>
		  </div>
	</div>
	<br>
	<ngb-progressbar *ngIf="progress > 0" type="success" [showValue]="true" [striped]="true" [value]="progress" [animated]="true" height="20px"></ngb-progressbar>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-primary"
      (click)="upload()"
	  [disabled]="!form.valid"
    >
      Upload
    </button>
    <button
      type="button"
      class="btn btn-danger"
      (click)="modal.dismiss('Close click')"
    >
      Close
    </button>
  </div>
</ng-template>
